{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n    \n    // ==========================================\n    // 1. НАСТРОЙКА БИБЛИОТЕК (Безопасный старт)\n    // ==========================================\n    \n    // Иконки\n    if (typeof lucide !== 'undefined') lucide.createIcons();\n\n    // GSAP Check\n    if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {\n        console.error(\"GSAP Critical Error: Libraries not loaded.\");\n        // Если GSAP не загрузился, делаем элементы видимыми, чтобы сайт не был пустым\n        document.querySelectorAll('.card, .blog-card, .hero__title, .hero__desc').forEach(el => el.style.opacity = 1);\n        return;\n    }\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Lenis (Плавный скролл)\n    if (typeof Lenis !== 'undefined') {\n        try {\n            const lenis = new Lenis({\n                duration: 1.2,\n                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n                smooth: true,\n            });\n            function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }\n            requestAnimationFrame(raf);\n            lenis.on('scroll', ScrollTrigger.update);\n            gsap.ticker.add((time) => lenis.raf(time * 1000));\n            gsap.ticker.lagSmoothing(0);\n        } catch (e) { console.warn('Lenis init error:', e); }\n    }\n\n    // ==========================================\n    // 2. МОБИЛЬНОЕ МЕНЮ\n    // ==========================================\n    const burger = document.querySelector('.header__burger');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-menu__link');\n\n    if (burger && mobileMenu) {\n        burger.addEventListener('click', () => {\n            burger.classList.toggle('is-active');\n            mobileMenu.classList.toggle('is-open');\n            document.body.classList.toggle('no-scroll');\n        });\n\n        mobileLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                burger.classList.remove('is-active');\n                mobileMenu.classList.remove('is-open');\n                document.body.classList.remove('no-scroll');\n            });\n        });\n    }\n\n    // ==========================================\n    // 3. АНИМАЦИИ (НОВЫЙ ПОДХОД С BATCH)\n    // ==========================================\n    \n    // Функция для безопасного выбора элементов\n    const q = (selector) => document.querySelector(selector);\n    const qa = (selector) => document.querySelectorAll(selector);\n\n    // --- A. HERO SECTION (Одиночные элементы) ---\n    const heroTl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n    if(q('.hero__title')) heroTl.from('.hero__title', { y: 60, opacity: 0, duration: 1, delay: 0.2 });\n    if(q('.hero__desc'))  heroTl.from('.hero__desc', { y: 30, opacity: 0, duration: 0.8 }, \"-=0.6\");\n    if(q('.hero__btns'))  heroTl.from('.hero__btns', { y: 20, opacity: 0, duration: 0.8 }, \"-=0.6\");\n    if(q('.cube-wrapper')) heroTl.from('.cube-wrapper', { scale: 0, opacity: 0, rotation: 180, duration: 1.5, ease: \"elastic.out(1,0.5)\" }, \"-=1\");\n\n    // --- B. ЗАГОЛОВКИ СЕКЦИЙ ---\n    qa('.section__header').forEach(header => {\n        gsap.from(header.children, {\n            scrollTrigger: {\n                trigger: header,\n                start: \"top 85%\",\n                toggleActions: \"play none none none\"\n            },\n            y: 30,\n            opacity: 0,\n            duration: 0.8,\n            stagger: 0.2\n        });\n    });\n\n    // --- C. СПИСКИ КАРТОЧЕК (ИСПРАВЛЕНИЕ: BATCH) ---\n    // Этот метод гарантированно анимирует все элементы, даже если их много или они сложены вертикально.\n    \n    // 1. Экспертиза и Блог (Карточки)\n    ScrollTrigger.batch(\".expertise .card, .blog-card\", {\n        start: \"top 85%\", // Начинаем, когда верх элемента на 85% высоты экрана\n        onEnter: batch => gsap.from(batch, {\n            opacity: 0,\n            y: 50,\n            duration: 0.8,\n            stagger: 0.15, // Задержка между элементами в одной \"пачке\"\n            ease: \"power2.out\",\n            overwrite: true\n        }),\n        once: true // Анимировать только один раз\n    });\n\n    // 2. Инновации (Список галочек)\n    ScrollTrigger.batch(\".innovation__list li\", {\n        start: \"top 90%\",\n        onEnter: batch => gsap.from(batch, {\n            opacity: 0,\n            x: -20,\n            duration: 0.6,\n            stagger: 0.1,\n            ease: \"power2.out\",\n            overwrite: true\n        }),\n        once: true\n    });\n\n    // 3. Контакты (Иконки)\n    ScrollTrigger.batch(\".contact__item\", {\n        start: \"top 90%\",\n        onEnter: batch => gsap.from(batch, {\n            opacity: 0,\n            y: 20,\n            duration: 0.6,\n            stagger: 0.1,\n            overwrite: true\n        }),\n        once: true\n    });\n\n    // Одиночные элементы в секциях\n    if(q('.innovation__image')) {\n        gsap.from('.innovation__image', {\n            scrollTrigger: { trigger: '.innovation', start: \"top 75%\" },\n            scale: 0.9, opacity: 0, duration: 1\n        });\n    }\n    if(q('.form')) {\n        gsap.from('.form', {\n            scrollTrigger: { trigger: '.contact', start: \"top 75%\" },\n            x: 50, opacity: 0, duration: 0.8\n        });\n    }\n\n    // ==========================================\n    // 4. ФОРМА И КУКИ (Без изменений)\n    // ==========================================\n    const form = document.getElementById('contactForm');\n    if (form) {\n        const num1 = Math.floor(Math.random() * 5) + 1;\n        const num2 = Math.floor(Math.random() * 5) + 1;\n        const result = num1 + num2;\n        if(q('#captchaTask')) q('#captchaTask').textContent = `${num1} + ${num2}`;\n\n        if(q('#phone')) q('#phone').addEventListener('input', (e) => e.target.value = e.target.value.replace(/\\D/g, ''));\n\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            if (parseInt(q('#captcha').value) !== result) {\n                alert('Неверное решение! Попробуйте еще раз.'); return;\n            }\n            const btn = form.querySelector('button');\n            btn.textContent = 'Отправлено!';\n            btn.style.background = '#D9F99D'; btn.style.color = '#111';\n            setTimeout(() => {\n                form.style.display = 'none';\n                q('#formSuccess').style.display = 'block';\n                form.reset();\n            }, 1000);\n        });\n    }\n\n    const cookiePopup = document.getElementById('cookiePopup');\n    if (cookiePopup && !localStorage.getItem('cookieAccepted')) {\n        setTimeout(() => cookiePopup.classList.add('is-visible'), 2500);\n        q('#acceptCookie').addEventListener('click', () => {\n            localStorage.setItem('cookieAccepted', 'true');\n            cookiePopup.classList.remove('is-visible');\n        });\n    }\n});"],"names":["el","raf","time","lenis","t","burger","mobileMenu","mobileLinks","link","q","selector","qa","heroTl","header","batch","form","num1","num2","result","e","btn","cookiePopup"],"mappings":"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"}